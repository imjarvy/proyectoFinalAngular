<div class="menu-view max-w-3xl mx-auto p-6">
  <style>
    .menu-view { font-family:'Poppins','Segoe UI',system-ui,-apple-system,sans-serif; color:#0f172a; }
    .menu-card { background:#fff; border-radius:18px; padding:28px; box-shadow:0 18px 40px rgba(15,23,42,0.12); border:1px solid rgba(15,23,42,0.06); position:relative; overflow:hidden; }
    .menu-card::after { content:""; position:absolute; inset:-70% 60% auto; width:320px; height:320px; background:radial-gradient(circle at center, rgba(168,85,247,0.18), transparent 65%); filter:blur(14px); pointer-events:none; }
    .menu-header { position:relative; z-index:1; margin-bottom:24px; }
    .menu-title { font-size:1.875rem; font-weight:800; margin-bottom:6px; }
    .menu-sub { color:#6b7280; font-size:0.95rem; }
    .form-grid { position:relative; z-index:1; display:grid; gap:18px; margin-bottom:18px; }
    .field { display:flex; flex-direction:column; gap:8px; }
    .field label { font-weight:600; font-size:0.95rem; color:#1f2937; }
    .control { border:1px solid rgba(15,23,42,0.12); border-radius:12px; padding:12px 14px; background:#fff; font-weight:500; transition:border-color .18s ease, box-shadow .18s ease; }
    .control:focus { border-color:#7c3aed; box-shadow:0 0 0 3px rgba(124,58,237,0.2); outline:none; }
    .control:disabled { background:#f3f4f6; cursor:not-allowed; color:#9ca3af; }
    .btn-primary { background:linear-gradient(135deg,#6366f1,#8b5cf6); color:#fff; padding:12px 18px; border:none; border-radius:12px; font-weight:700; box-shadow:0 14px 26px rgba(99,102,241,0.22); transition:transform .18s ease, box-shadow .18s ease; }
    .btn-primary:hover:not(:disabled) { transform:translateY(-2px); box-shadow:0 18px 34px rgba(99,102,241,0.28); }
    .btn-primary:disabled { opacity:0.55; cursor:not-allowed; box-shadow:none; }
      .error-info { position:relative; z-index:1; padding:12px 16px; border-radius:12px; border:1px solid rgba(239,68,68,0.22); background:rgba(239,68,68,0.08); color:#b91c1c; font-weight:600; margin-bottom:18px; }
    .table-title { margin-top:12px; font-size:1.35rem; font-weight:700; position:relative; z-index:1; }
    .menu-table { width:100%; border-collapse:separate; border-spacing:0; margin-top:16px; border-radius:16px; overflow:hidden; box-shadow:0 14px 28px rgba(15,23,42,0.08); position:relative; z-index:1; }
    .menu-table thead th { background:linear-gradient(90deg,#4c1d95,#7c3aed); color:#fff; padding:14px 16px; text-align:left; font-size:0.75rem; letter-spacing:0.08em; text-transform:uppercase; font-weight:700; }
    .menu-table tbody td { background:#fff; padding:14px 16px; border-bottom:1px solid rgba(15,23,42,0.06); color:#334155; }
    .menu-table tbody tr:nth-child(even) td { background:#f8fafc; }
    .menu-table tbody tr:hover td { background:rgba(124,58,237,0.08); }
    .cell-right { text-align:right; font-weight:700; }
    .cell-muted { color:#6b7280; }
    .cell-strong { font-weight:700; color:#0f172a; }
    .actions { display:flex; gap:10px; justify-content:center; }
    .chip-btn { border:none; padding:8px 14px; border-radius:999px; font-weight:600; transition:transform .18s ease, box-shadow .18s ease; cursor:pointer; }
    .chip-edit { background:rgba(37,99,235,0.12); color:#1d4ed8; box-shadow:0 10px 20px rgba(37,99,235,0.18); }
    .chip-edit:hover { transform:translateY(-2px); box-shadow:0 14px 28px rgba(37,99,235,0.24); }
    .chip-delete { background:rgba(239,68,68,0.14); color:#b91c1c; box-shadow:0 10px 20px rgba(239,68,68,0.18); }
    .chip-delete:hover { transform:translateY(-2px); box-shadow:0 14px 28px rgba(239,68,68,0.24); }
    .footer { margin-top:24px; display:flex; justify-content:flex-end; }
    .btn-success { background:linear-gradient(135deg,#10b981,#22d3ee); color:#fff; padding:12px 20px; border:none; border-radius:12px; font-weight:700; box-shadow:0 16px 30px rgba(16,185,129,0.24); transition:transform .18s ease, box-shadow .18s ease; }
    .btn-success:hover:not(:disabled) { transform:translateY(-2px); box-shadow:0 20px 36px rgba(16,185,129,0.3); }
    .btn-success:disabled { opacity:0.55; cursor:not-allowed; box-shadow:none; }
    @media(max-width:720px){
      .menu-card { padding:20px; }
      .menu-table, .menu-table thead, .menu-table tbody, .menu-table th, .menu-table td, .menu-table tr { display:block; }
      .menu-table thead { display:none; }
      .menu-table tbody tr { margin-bottom:12px; border:1px solid rgba(15,23,42,0.08); border-radius:12px; overflow:hidden; box-shadow:0 12px 24px rgba(15,23,42,0.08); }
      .menu-table tbody td { display:flex; justify-content:space-between; align-items:center; padding:12px 14px; }
      .menu-table tbody td::before { content:attr(data-label); font-weight:700; color:#0f172a; text-transform:uppercase; letter-spacing:0.06em; font-size:0.7rem; }
      .actions { justify-content:flex-start; }
    }
  </style>

  <div class="menu-card">
    <div class="menu-header">
      <h2 class="menu-title">Gestión del Menú</h2>
      <p class="menu-sub">Selecciona un restaurante, agrega productos y controla los precios fácilmente</p>
    </div>

    <div *ngIf="error" class="error-info">{{ error }}</div>

    <div class="form-grid">
      <div class="field">
        <label>Restaurante</label>
        <select
          class="control"
          [ngModel]="selectedRestaurant"
          (ngModelChange)="onRestaurantChange($event)"
        >
          <option value="">Selecciona un restaurante</option>
          <option *ngFor="let r of restaurants" [value]="r.id">{{ r.name }}</option>
        </select>
      </div>

      <div class="field">
        <label>Producto</label>
        <select
          class="control"
          [ngModel]="selectedProduct"
          (ngModelChange)="onProductChange($event)"
        >
          <option value="">Selecciona un producto</option>
          <option *ngFor="let p of products" [value]="p.id">{{ p.name }}</option>
        </select>
      </div>

      <div class="field">
        <label>Precio</label>
        <input
          type="number"
          class="control"
          [ngModel]="price"
          (ngModelChange)="price = $event"
          [disabled]="!selectedProduct"
        />
      </div>
    </div>

    <button
      class="btn-primary"
      (click)="addProductToMenu()"
      [disabled]="!selectedProduct || !price"
    >
      Agregar producto al menú
    </button>

    <h3 class="table-title">Productos en el menú</h3>
    <table class="menu-table">
      <thead>
        <tr>
          <th>Categoría</th>
          <th>Producto</th>
          <th>Descripción</th>
          <th>Precio</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let prod of menuProducts; let idx = index">
          <td class="cell-muted" data-label="Categoría">{{ prod.category }}</td>
          <td class="cell-strong" data-label="Producto">{{ prod.name }}</td>
          <td class="cell-muted" data-label="Descripción">{{ prod.description }}</td>
          <td class="cell-right" data-label="Precio">{{ prod.price }}</td>
          <td class="actions" data-label="Acciones">
            <button
              class="chip-btn chip-edit"
              (click)="editProduct(prod)"
            >
              Editar
            </button>
            <button
              class="chip-btn chip-delete"
              (click)="removeProductFromMenu(idx)"
            >
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="footer">
      <button
        class="btn-success"
        (click)="saveMenu()"
        [disabled]="!selectedRestaurant || menuProducts.length === 0 || loading"
      >
        Guardar Menú
      </button>
    </div>
  </div>
</div>

<div class="customers-view">
  <style>
    .customers-view { font-family:'Poppins','Segoe UI',system-ui,-apple-system,sans-serif; color:#0f172a; }
    .header-bar { display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:16px; }
    .title { font-size:1.75rem; font-weight:800; }
    .btn-primary { background:linear-gradient(135deg,#10b981,#14b8a6); color:#fff; padding:12px 16px; border-radius:12px; font-weight:700; text-decoration:none; box-shadow:0 14px 26px rgba(20,184,166,0.24); transition:transform .18s ease, box-shadow .18s ease; }
    .btn-primary:hover { transform:translateY(-2px); box-shadow:0 18px 32px rgba(20,184,166,0.3); }
    .table-card { background:#fff; border-radius:20px; padding:24px; box-shadow:0 18px 40px rgba(15,23,42,0.12); border:1px solid rgba(15,23,42,0.08); position:relative; overflow:hidden; }
    .table-card::after { content:""; position:absolute; inset:-70% 60% auto; width:340px; height:340px; background:radial-gradient(circle at center, rgba(16,185,129,0.16), transparent 65%); filter:blur(14px); }
    .inner { position:relative; z-index:1; overflow-x:auto; }
    .styled-table { width:100%; border-collapse:separate; border-spacing:0; border-radius:18px; overflow:hidden; box-shadow:0 14px 28px rgba(15,23,42,0.08); }
    .styled-table thead th { background:linear-gradient(90deg,#0f766e,#14b8a6); color:#fff; padding:14px 16px; text-align:left; font-size:0.76rem; letter-spacing:0.08em; text-transform:uppercase; font-weight:700; }
    .styled-table tbody td { background:#fff; padding:14px 16px; border-bottom:1px solid rgba(15,23,42,0.06); color:#334155; }
    .styled-table tbody tr:nth-child(even) td { background:#f8fafc; }
    .styled-table tbody tr:hover td { background:rgba(20,184,166,0.1); }
    .cell-strong { font-weight:700; color:#0f172a; }
    .cell-muted { color:#6b7280; }
    .actions { display:flex; justify-content:flex-end; gap:10px; }
    .chip-btn { border:none; padding:9px 14px; border-radius:999px; font-weight:700; cursor:pointer; transition:transform .18s ease, box-shadow .18s ease; }
    .chip-edit { background:rgba(37,99,235,0.12); color:#1d4ed8; box-shadow:0 12px 22px rgba(37,99,235,0.18); }
    .chip-edit:hover { transform:translateY(-2px); box-shadow:0 16px 28px rgba(37,99,235,0.24); }
    .chip-delete { background:rgba(239,68,68,0.14); color:#b91c1c; box-shadow:0 12px 22px rgba(239,68,68,0.18); }
    .chip-delete:hover { transform:translateY(-2px); box-shadow:0 16px 28px rgba(239,68,68,0.24); }
    .empty-row { text-align:center; padding:18px; font-weight:700; color:#64748b; }
    .status { display:inline-flex; align-items:center; gap:6px; font-weight:600; }
    .pill { padding:6px 12px; border-radius:999px; background:rgba(15,118,110,0.12); color:#0f766e; font-weight:700; font-size:0.85rem; }
    @media(max-width:768px){
      .header-bar { flex-direction:column; align-items:flex-start; }
      .styled-table, .styled-table thead, .styled-table tbody, .styled-table th, .styled-table td, .styled-table tr { display:block; }
      .styled-table thead { display:none; }
      .styled-table tbody tr { margin-bottom:12px; border:1px solid rgba(15,23,42,0.08); border-radius:14px; overflow:hidden; box-shadow:0 12px 24px rgba(15,23,42,0.08); }
      .styled-table tbody td { display:flex; justify-content:space-between; align-items:center; padding:12px 14px; }
      .styled-table tbody td::before { content:attr(data-label); font-weight:700; color:#0f172a; text-transform:uppercase; letter-spacing:0.06em; font-size:0.7rem; }
      .actions { justify-content:flex-start; }
    }
  </style>

  <ng-container *ngIf="loading; else loadedTpl">
    <div class="table-card">
      <div class="inner">Cargando...</div>
    </div>
  </ng-container>

  <ng-template #loadedTpl>
    <div class="header-bar">
      <h2 class="title">Lista de Clientes</h2>
      <a [routerLink]="['/dashboard/admin/customers/new']" class="btn-primary">Crear Cliente</a>
    </div>

    <div *ngIf="error" class="table-card" style="border-color:rgba(239,68,68,0.18);">
      <div class="inner" style="color:#b91c1c; font-weight:700;">Error: {{ error }}</div>
    </div>

    <div class="table-card">
      <div class="inner">
        <table class="styled-table">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Email</th>
              <th>Teléfono</th>
              <th style="text-align:right;">Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngIf="customers.length === 0">
              <td colspan="4" class="empty-row">Aún no hay clientes registrados.</td>
            </tr>
            <tr *ngFor="let customer of customers">
              <td class="cell-strong" data-label="Nombre">{{ customer.name }}</td>
              <td class="cell-muted" data-label="Email">{{ customer.email }}</td>
              <td class="cell-muted" data-label="Teléfono">
                <span class="pill">{{ customer.phone }}</span>
              </td>
              <td class="actions" data-label="Acciones">
                <a
                  [routerLink]="['/dashboard/admin/customers/edit', customer.id]"
                  class="chip-btn chip-edit"
                >
                  Editar
                </a>
                <button
                  (click)="handleDelete(customer.id!)"
                  class="chip-btn chip-delete"
                >
                  Eliminar
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </ng-template>
</div>
